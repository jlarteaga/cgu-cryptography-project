@startuml

interface Cipher {
    String encrypt(String plainText)
    String decrypt(String encryptedText)
}

class SubstitutionCipher implements Cipher {
    - char[] baseAlphabet;
    - char[] cipherAlphabet;
    - Map<Character, Integer> encryptionAlphabetMapping;
    - Map<Character, Integer> decryptionAlphabetMapping;

    SubstitutionCipher(char[] baseAlphabet, char[] cipherAlphabet)
    - {static} String substituteString(String input, Map<Character, Character> alphabetMapping)
    void setAlphabets(char[] baseAlphabet, char[] cipherAlphabet)
    void setBaseAlphabet(char[] baseAlphabet)
    void setCipherAlphabet(char[] cipherAlphabet)
    int getAlphabetSize()
    char[] getBaseAlphabet()
    char[] getCipherAlphabet()
    - void buildAlphabetMappings()
}

class CaesarCipher implements Cipher {
    SubstitutionCipher innerCipher
    int offset;

    CaesarCipher(char[] alphabet, int offset)
    - {static} void validateAlphabet(char[] alphabet)
    - {static} void normalizeOffset(int offset, alphabet[])
    - {static} char[] generateCipherAlphabet(char[] baseAlphabet, int normalizedOffset)
    setOffset(int offset)

}

class FileValidator {
    {static} void validateThatIsDirectory(Path path)
    {static} void validateThatIsRegularFile(Path path)
    {static} void validateThatFileExists(Path path)
    {static} void validateThatFileDoesNotExist(Path path)
}

class FileProcessor {
    - int batchSize
    - Charset defaultCharset

    FileProcessor(int batchSize, Charset defaultCharset)
    {static} void validateCharset(Charset charset)
    {static} void validateBatchSize(Charset charset)
    void transformFile(Path input, Path output, UnaryOperator<String> transformer)

}

class Normalizer {
    - Set<Character> alphabet
    - char separator

    - {static} validateSeparator(Set<Character> alphabet, char separator)
    String normalize(String input)
}

FileValidator -- FileProcessor

@enduml
